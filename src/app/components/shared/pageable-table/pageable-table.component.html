
<div data-bs-theme="dark">
  <div class="table-responsive" style="height: 300px; overflow-y: auto;">
    <table class="table table-striped" [ngClass]="tableClasses">
      <thead>
        <tr>
          <th *ngFor="let column of tableItemsConfig">
            {{ column.columnLabel }}
          </th>
          <th *ngIf="isForSelection || isForEdit" class="d-flex justify-content-center">
            Acciones
          </th>
        </tr>
      </thead>
      <tbody *ngIf="content && !isLoading">
        <tr *ngFor="let item of getDataToDisplay()">
          <td *ngFor="let column of tableItemsConfig">
            {{ getTextForColumnLabel(item, column.valueReference) }}
          </td>
          <td *ngIf="isForSelection || isForEdit">
            <div class="d-flex justify-content-center">
              <button class="btn btn-primary me-2" (click)="onEdit(item)" *ngIf="isForEdit">
                Editar
              </button>
              <button class="btn btn-primary" (click)="selectItem(item)" *ngIf="isForSelection">
                Seleccionar
              </button>
            </div>
          </td>
        </tr>
      </tbody>
      @if (isLoading) {
        <tbody>
          <tr style="height: 260px;">
            <td colspan="100%" class="text-center" style="height: 260px;">
              <div class="d-flex justify-content-center align-items-center" style="height: 100%; width: 100%;">
                <div class="spinner-border text-primary m-auto" role="status">
                  <span class="visually-hidden">Cargando...</span>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      }
    </table>
  </div>
  <div aria-label="NavegaciÃ³n" class="d-flex justify-content-center mt-2">
    <ul class="pagination m-0">
      <li class="page-item">
        <button class="page-link" aria-label="Anterior" [ngClass]="{ 'disabled': content ? (content.page - maxSelectablePages) <= 0 : true }" (click)="previousSection()"> 
          <span aria-hidden="true">&laquo;</span>
        </button>
      </li>
      <li class="page-item" *ngFor="let i of rangeForPages()" [ngClass]="{ 'active': i === numberPageForOptimisticUpdate }">
        <button class="page-link" (click)="changePage(i)">
          {{i}}
        </button>
      </li>
      <li class="page-item">
        <button class="page-link"aria-label="Siguiente" (click)="nextSection()" [ngClass]="{ 'disabled': content ? !canNextSection() : true }">
          <span aria-hidden="true">&raquo;</span>
        </button>
      </li>
    </ul>
  </div>
</div>